{"version":3,"file":"differenceequationsignal1d.umd.js","sources":["../src/DifferenceEquationSignal1D.js","../src/main.js"],"sourcesContent":["/*\n* Author    Jonathan Lurie - http://me.jonathanlurie.fr\n* License   MIT\n* Link      https://github.com/jonathanlurie/differenceequationsignal1d\n* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute\n*/\n\n\nclass DifferenceEquationSignal1D {\n\n  constructor() {\n    this._inputSignal = null;\n    this._outputSignal = null;\n    this._aCoefficients = null;\n    this._bCoefficients = null;\n  }\n  \n  \n  /**\n  * Set the input signal. Will also reset the output to null.\n  * @param {Float32Array} signal - the signal\n  */\n  setInput( signal ){\n    this._outputSignal = null;\n    this._inputSignal = signal;\n  }\n  \n  \n  /**\n  * Set the array of 'a' coefficients. Must be padded by an additional \"1.0\" because\n  * this set of coefficient will be addressed at it index \"1\" ( and not \"0\")\n  * @param {Float32Array|Array} a - the 'a' coeficients\n  */\n  setACoefficients( a ){\n    this._aCoefficients = a;\n  }\n  \n  \n  /**\n  * Set the array of 'b' coefficients\n  * @param {Float32Array|Array} b - the 'b' coeficients\n  */\n  setBCoefficients( b ){\n    this._bCoefficients = b;\n  }\n  \n  \n  /**\n  * Get the output signal\n  * @return {Float32Array} the filtered signal\n  */\n  getOutput(){\n    return this._outputSignal;\n  }\n\n\n  run(){\n    var that = this;\n    this._outputSignal = new Float32Array( this._inputSignal.length ).fill(0);\n    \n    // some shortcuts\n    var x = this._inputSignal;\n    var y = this._outputSignal;\n    var b = this._bCoefficients;\n    var a = this._aCoefficients;\n    var M = b.length - 1;\n    var N = a.length - 1;\n    \n    \n    \n    function getOutputAt( n ){\n      var coef = \"\";\n      \n      // sum of the x\n      let xSum = 0;\n      for(var i=0; i<=M; i++){\n        var safeSignaValue = (i>n)? 0 : x[n-i];\n        xSum += b[i] * safeSignaValue;\n      }\n      \n      // sum of the y \n      let ySum = 0;\n      for(var j=1; j<=N; j++){\n        var safeSignaValue = (j>n)? 0 : y[n-j];\n        ySum += a[j] * safeSignaValue;\n      }\n\n      var valueAtN = xSum - ySum;\n      return valueAtN;\n    }\n    \n    for(var i=0; i<this._outputSignal.length; i++){\n      this._outputSignal[i] = getOutputAt(i);\n    }\n  }\n  \n\n} /* END of class DifferenceEquationSignal1D */\n\nexport { DifferenceEquationSignal1D };\n","// if we wanted to use foo here:\n//import foo from './foo.js';\n\n// but we just want to make it accessible:\nexport { DifferenceEquationSignal1D } from './DifferenceEquationSignal1D.js'; \n"],"names":[],"mappings":";;;;;;AAAA;;;;;;;;AAQA,MAAM,0BAA0B,CAAC;;EAE/B,WAAW,GAAG;IACZ,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;GAC5B;;;;;;;EAOD,QAAQ,EAAE,MAAM,EAAE;IAChB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC1B,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;GAC5B;;;;;;;;EAQD,gBAAgB,EAAE,CAAC,EAAE;IACnB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;GACzB;;;;;;;EAOD,gBAAgB,EAAE,CAAC,EAAE;IACnB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;GACzB;;;;;;;EAOD,SAAS,EAAE;IACT,OAAO,IAAI,CAAC,aAAa,CAAC;GAC3B;;;EAGD,GAAG,EAAE;IACH,AACA,IAAI,CAAC,aAAa,GAAG,IAAI,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;;IAG1E,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;IAC1B,IAAI,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;IAC3B,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;IAC5B,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;IAC5B,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IACrB,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;;;;IAIrB,SAAS,WAAW,EAAE,CAAC,EAAE;MACvB,AAGA,IAAI,IAAI,GAAG,CAAC,CAAC;MACb,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACrB,IAAI,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC;OAC/B;;;MAGD,IAAI,IAAI,GAAG,CAAC,CAAC;MACb,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;QACrB,IAAI,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC;OAC/B;;MAED,IAAI,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC;MAC3B,OAAO,QAAQ,CAAC;KACjB;;IAED,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC;MAC5C,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;KACxC;GACF;;;CAGF,8CAA8C;;ACjG/C;;;0CAG0C;;;;;;;;;;;;"}